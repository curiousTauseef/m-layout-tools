{"version":3,"sources":["../js/_init.js","../js/_ui.js","../js/_breakpoints.js","../js/_viewport-info.js","../js/_device-Info.js","../js/_pictures-info.js","../js/layout_tools.js"],"names":["lt","vers","lt_init","currentScript","document","currentDir","src","split","substring","lastIndexOf","framework","dataset","fw","css","head","insertAdjacentHTML","default_settings","hidden","pictures_info","stored_settings","sessionStorage","lt_settings","JSON","parse","settings","Object","assign","store_settings","param_obj","stringify","lt_ui","wrapper_id","body","wrapper","getElementById","innerHTML","content_wrapper","querySelector","brkpt_wrapper","addEventListener","classList","toggle","hide_btn","sf_toolbar","set_hidden","add_storage","is_hidden","contains","toggleAttribute","lt_brkpt","dt_params","getAttribute","fw_breakpoints_map","bootstrap3","bootstrap4","foundation6","lt_viewport_info","lt_vpinfo","body_font_size","parseFloat","window","getComputedStyle","getPropertyValue","getViewportSize","body_width","clientWidth","body_width_em","toFixed","body_height","clientHeight","body_height_em","ResizeObserver","resizeObserver","observe","onresize","lt_device_info","lt_dinfo","navigator","userAgent","devicePixelRatio","screen","width","height","lt_pictures_info","pictures","getElementsByTagName","picturesInfoTrigger","removePicturesInfo","forEach","element","remove","showPicturesInfo","element_position","img_info_rows","img_props","rows","element_img","prop","add","checked"],"mappings":"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","sourcesContent":["export let lt = {\n  vers: '3.0'\n};\n\nexport default function() {\n  'use strict';\n\n  // init\n  let currentScript = document.currentScript;\n  lt.currentDir = currentScript.src.split('?')[0];\n  lt.currentDir = lt.currentDir.substring(0, lt.currentDir.lastIndexOf('/'));\n\n  lt.framework = currentScript.dataset.fw || 'bootstrap4';\n  lt.css = currentScript.dataset.css || lt.currentDir + '/layout_tools.css';\n\n  // load css\n  document.head.insertAdjacentHTML('beforeend',\n    '<link rel=\"stylesheet\" href=\"' + lt.css + '?v=' + lt.vers + '\" type=\"text/css\" media=\"all\">'\n  );\n\n  // load settings from storage\n  const default_settings = {\n    hidden: false,\n    pictures_info: false\n  };\n\n  const stored_settings = sessionStorage.lt_settings? JSON.parse(sessionStorage.lt_settings) : {};\n  lt.settings = Object.assign({}, default_settings, stored_settings );\n\n\n  lt.store_settings = (( param_obj ) => {\n    lt.settings = Object.assign({}, lt.settings, param_obj );\n    sessionStorage.lt_settings = JSON.stringify(lt.settings);\n  });\n}\n","import {lt} from './_init';\n\nexport default function () {\n  'use strict';\n\n  const wrapper_id = 'lt-wrapper';\n\n  document.body.insertAdjacentHTML('beforeend', '<div id=\"' + wrapper_id + '\" class=\"lt-collapsed\"></div>');\n  lt.wrapper = document.getElementById(wrapper_id);\n\n  lt.wrapper.innerHTML = `<div class=\"lt-inner-wrapper\">\n      <div class=\"lt-content\">\n        <div role=\"button\" class=\"lt-hide-show\">Nascondi</div>\n      </div>\n      <div class=\"lt-brkpt\">&#x2732;</div>\n    </div>`;\n\n  lt.content_wrapper = document.querySelector('#' + wrapper_id + ' .lt-content');\n  lt.brkpt_wrapper = document.querySelector('#' + wrapper_id + ' .lt-brkpt');\n\n  // contrazione wrapper\n  lt.brkpt_wrapper.addEventListener('click', function () {\n    lt.wrapper.classList.toggle('lt-collapsed');\n  }, false);\n\n  // layout tools e sf toolbar invisibili invisibile\n  const hide_btn = lt.content_wrapper.querySelector('.lt-hide-show'),\n    sf_toolbar = document.querySelector('.sf-toolbar'),\n    set_hidden = (add_storage) => {\n      lt.wrapper.classList.toggle('lt-hidden');\n      let is_hidden = lt.wrapper.classList.contains('lt-hidden');\n      if(sf_toolbar) {\n        sf_toolbar.toggleAttribute('hidden', is_hidden);\n      }\n      hide_btn.innerHTML = is_hidden ? 'Mostra' : 'Nascondi';\n      if(add_storage) {\n        lt.store_settings({hidden: is_hidden});\n      }\n    };\n\n  hide_btn.addEventListener('click', () => {\n    set_hidden(true);\n  },false);\n\n  if(lt.settings.hidden) {\n    set_hidden(false);\n  }\n}\n","import {lt} from './_init';\n\n/*\n  caricamento indicatori breakpoint e dimensioni viewport\n\n  Se lo script Ã¨ definito  il parametro `fw: __framework__`, viene visualizzato un div informativo\n  con breakpoint attivo, dimensioni della pagina ecc.\n  e caricato un css di formattazione\n\n  __framework__ corrisponde alla sigla del fw: bootstrap3, bootstrap4, foundation6, ecc.\n\n*/\n\nexport default function () {\n\n  let dt_params = {};\n  dt_params.fw = document.currentScript.getAttribute('data-fw') || 'bootstrap4';\n\n  const fw_breakpoints_map= {\n\n    bootstrap3  : '<span class=\"visible-xs-inline\">xs</span>' +\n        '<span class=\"visible-sm-inline\">sm</span>' +\n        '<span class=\"visible-md-inline\">md</span>' +\n        '<span class=\"visible-lg-inline\">lg</span>',\n\n    bootstrap4  : '<span class=\"d-sm-none\">xs</span>' +\n        '<span class=\"d-none d-sm-inline d-md-none\">sm</span>' +\n        '<span class=\"d-none d-md-inline d-lg-none\">md</span>' +\n        '<span class=\"d-none d-lg-inline d-xl-none\">lg</span>' +\n        '<span class=\"d-none d-xl-inline\">xl</span>',\n\n    foundation6 : '<span class=\"show-for-small-only\">small</span>' +\n        '<span class=\"show-for-medium-only\">medium</span>' +\n        '<span class=\"show-for-large-only\">large</span>' +\n        '<span class=\"show-for-xlarge\">xlarge</span>'\n  };\n\n  if(dt_params.fw) {\n    lt.brkpt_wrapper.innerHTML = fw_breakpoints_map[dt_params.fw];\n  }\n\n}\n","import {lt} from './_init';\n\nexport default function () {\n  'use strict';\n\n  //viewport info\n  lt.content_wrapper.insertAdjacentHTML('afterbegin', '<div class=\"lt-vpinfo\"></div>');\n\n  const lt_vpinfo = lt.content_wrapper.querySelector('.lt-vpinfo'),\n    body_font_size = parseFloat(window.getComputedStyle(document.body, null)\n      .getPropertyValue('font-size')),\n    getViewportSize = function () {\n      let body_width = document.body.clientWidth,\n        body_width_em = (body_width / body_font_size).toFixed(2),\n        body_height = document.body.clientHeight,\n        body_height_em = (body_height / body_font_size).toFixed(2);\n\n      lt_vpinfo.innerHTML = '<details><summary>Viewport info</summary>' +\n        `${body_width}&VeryThinSpace;&times;&VeryThinSpace;${body_height}&VeryThinSpace;px` +\n        '<br>' +\n        `${body_width_em}&VeryThinSpace;&times;&VeryThinSpace;${body_height_em}&VeryThinSpace;em` +\n        '</details>';\n    };\n\n\n  getViewportSize();\n  if(ResizeObserver) {\n\n    const resizeObserver = new ResizeObserver(() => {\n      getViewportSize();\n    });\n\n    resizeObserver.observe(document.body);\n\n  } else {\n    window.onresize = getViewportSize; // safari, ie\n  }\n}\n","import {lt} from './_init';\n\nexport default function () {\n  'use strict';\n\n  //device info\n\n  lt.content_wrapper.insertAdjacentHTML('afterbegin', '<div class=\"lt-device-info\"></div>');\n\n  const lt_dinfo = lt.content_wrapper.querySelector('.lt-device-info');\n\n  lt_dinfo.innerHTML = '<details><summary>Device info</summary>' +\n    `<strong>userAgent</strong>: ${window.navigator.userAgent}<br>` +\n    `<strong>devicePixelRatio</strong>: ${window.devicePixelRatio}<br>` +\n    `<strong>screen.width</strong>: ${window.screen.width}&VeryThinSpace;px<br>` +\n    `<strong>screen.height</strong>: ${window.screen.height}&VeryThinSpace;px` +\n    '</details>';\n\n  return lt;\n\n}\n","import {lt} from './_init';\n\n//TODO imgs without picture and with size attribute\n\nexport default function () {\n  'use strict';\n\n  //ui\n  lt.content_wrapper.insertAdjacentHTML('afterbegin',\n    '<div><label><input type=\"checkbox\" class=\"lt-pictures-info-trigger\"> Pictures info</label</div>'\n  );\n\n  let pictures = document.getElementsByTagName('picture');\n\n  const picturesInfoTrigger = lt.content_wrapper.querySelector('.lt-pictures-info-trigger'),\n    removePicturesInfo = () => {\n      [...pictures].forEach(element => {\n        element.querySelector('.lt-picture-info-wrapper').remove();\n        element.classList.remove('lt-position-relative');\n      });\n    },\n\n    //img info\n    showPicturesInfo = () => {\n\n      [...pictures].forEach(element => {\n      // detect if picture element is positioned\n        let element_position = window.getComputedStyle(element).getPropertyValue('position');\n\n        const img_info_rows = () => {\n          const img_props = [\n            'src',\n            'currentSrc',\n            'srcset',\n            'sizes',\n            'media',\n            'width',\n            'height',\n            'naturalWidth',\n            'naturalHeight',\n            'id',\n            'className'\n          //'attributes'\n          ];\n\n          let rows = '',\n            element_img = element.querySelector('img');\n\n          img_props.forEach(prop => {\n            rows += `<tr><th scope=\"row\">${prop}</th><td>${element_img[prop]? element_img[prop] : '&mdash;'}</td></tr>`;\n          });\n\n          return rows;\n        };\n\n        element.insertAdjacentHTML('beforeend',\n          `<div class=\"lt-picture-info-wrapper\">\n          <details>\n            <summary>Info</summary>\n            <table>\n              <tbody>\n                ${img_info_rows()}\n              </tbody>\n            </table>\n          </details>\n        </div>`\n        );\n\n        if( element_position === 'static' ) {\n          element.classList.add('lt-position-relative');\n        }\n\n      }); // end foreach\n    }; // end showPicturesInfo\n\n\n  picturesInfoTrigger.addEventListener('click', () => {\n    lt.store_settings({pictures_info: picturesInfoTrigger.checked});\n\n    if( picturesInfoTrigger.checked ) {\n      showPicturesInfo();\n    } else {\n      removePicturesInfo();\n    }\n  }, false);\n\n  if(lt.settings.pictures_info) {\n    showPicturesInfo();\n    picturesInfoTrigger.checked = true;\n  }\n\n}\n","/**\n * layout_tools.js - 3 / Massimo Cassandro / 2016-2020\n */\n\n\nimport lt_init from './_init';\nimport lt_ui from './_ui';\nimport lt_brkpt from './_breakpoints';\nimport lt_viewport_info from './_viewport-info';\nimport lt_device_info from './_device-Info';\nimport lt_pictures_info from './_pictures-info';\n\nlt_init();\nlt_ui();\nlt_brkpt();\nlt_viewport_info();\nlt_device_info();\nlt_pictures_info();\n"]}